<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Niekopce </title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css"/>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.10.3/jquery-ui.css"></script>

    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="/static/css/mdb.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
          integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

    <!-- Customs css style sheets -->
    <link rel="stylesheet" type="text/css" href="/css/custom.css"/> <!-- TODO: Analogicznie -->
    <script type="text/javascript" src="/js/userPageScripts.js"></script>

    <script th:src="@{/js/jquery-1.6.2.js}" type="text/javascript"></script>


    <script>
        var now = new Date();
        var countDownDate = new Date();
        countDownDate.setMinutes(countDownDate.getMinutes() + 5);
        reactOnMouseClick();
    </script>

    <script>
        var next_visit_date;
        var is_finished;

        $(document).ready(function () {                         //TODO: Dokończyć, przetestować, przenieść do pliku .js
            $('#getApplicationButton').click(function () {
                $.ajax({
                    url: 'getApplications',
                    type: 'GET',
                    dataType: "json",
                    data: {
                        'next_visit_date': next_visit_date,
                        'is_finished': is_finished
                    }
                }).done(function (data) {
                    var table = {};
                    $('#certificationsTable').empty();
                    $.each(data, function (i, parameters) {
                        var next_visit_date = parameters.next_visit_date;
                        var is_finished = parameters.is_finished;
                        table="<tr><td>" + next_visit_date + "</td><td>" + is_finished + "</td><td><button id='handleVisitButton' class='smallButton'>Obsłuż</button></td></tr>"
                    })
                })
            })
        })
    </script>


</head>

<body onload="calculaateActivity()">    <!-- TODO: Dorobić onclick -->

<p id="demo"></p>


<h1>Default admin page</h1>
<div class="parent">
    <input type="button" id="getApplicationButton" class="button" value="Przeglądaj zgłoszenia"
           onclick="sendApplication()">
    <a href="/main/returnMain" class="button">Powrót na stronę główną</a>
    <a href="/logout" class="button">Wyloguj</a>
</div>


<!------------------- TABELA DO WYŚWIETLANIA CERTYFIKACJI ------------------------------------------------------------->
<table id="certificationsTable">
    <thead>
    <tr>
        <!--  <th>customer_name</th>
          <th>customer_lastname</th>
          <th>address</th> -->
        <th>next_visit_date</th>
        <th>is_finished</th>
    </tr>
    </thead>
</table>


<div id="logoutPopUp" style="display: none">
    Zostałeś wylogowany ze względu na brak aktywności
    <form th:action="@{/logout}" method="post">
        <input type="submit" value="Sign Out" id="SignOutSubmit"/>
    </form>
</div>
</body>
</html>