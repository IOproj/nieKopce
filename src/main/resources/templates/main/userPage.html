<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Niekopce </title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />
    <script type="text/javascript" src="https://code.jquery.com/ui/1.10.3/jquery-ui.css"></script>

    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design Bootstrap -->
    <link href="/static/css/mdb.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
        integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

    <!-- Customs css style sheets -->
    <link rel="stylesheet" type="text/css" href="/css/custom.css" /> <!-- TODO: Analogicznie -->

<script th:src="@{/js/jquery-1.6.2.js}" type="text/javascript"></script>


    <script>
        var now=new Date();
        // Set the date we're counting down to
        var countDownDate = new Date();
        countDownDate.setMinutes(countDownDate.getMinutes()+5);
        // Update the count down every 1 second
        function calculateActivity() {


           f = setInterval(function () {

                var mints = countDownDate.getMinutes();
                var secds = countDownDate.getSeconds();
                // Get today's date and time
                now = new Date();
                var nowTime = now.getTime();
                // Find the distance between now and the count down date
                var distance = countDownDate - nowTime;

                // Time calculations for days, hours, minutes and seconds
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Output the result in an element with id="demo"
                document.getElementById("demo").innerHTML = days + "d " + hours + "h "
                    + minutes + "m " + seconds + "s ";

                // If the count down is over, write some text
                if (distance < 0) {
                    clearInterval(f);
                    $("#logoutPopUp").dialog({
                        title: "AAAAAAA",
                        width: 645,
                        height: 300,
                        modal: true,
                    });
                    $('#kekke').click(function () {
                        $(this).dialog('close');
                    })
                    document.getElementById("demo").innerHTML = "EXPIRED";
                }
            }, 1000);

        }

        $(document).mousedown(function () {
            now = new Date();
            countDownDate = new Date();
            countDownDate.setSeconds(now.getSeconds()+10);
        })  ;
    </script>
</head>

<body onload="calculateActivity()">     <!-- TODO: Dorobić oncloe -->

<p id="demo"></p>


<h1>Default customer page</h1>
<a href="/main/returnMain" class="button">Powrót na stronę główną</a>

<div id="logoutPopUp" style="display: none">
    Zostałeś wylogowany ze względu na brak aktywności
    <form th:action="@{/logout}" method="post">
        <input type="submit" value="Sign Out" id="kekke" />
    </form>
</div>
</body>
</html>